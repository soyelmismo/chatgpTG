## 設定

### Telegramトークン

Telegramボットを使用するには、Telegramトークンを提供する必要があります。このトークンは、`https://t.me/botfather`を介してボットを作成することで取得できます。トークンは`TELEGRAM_TOKEN`変数に保存する必要があります。

### メニューの設定

ボットのメニューは、以下のオプションで設定できます：

- `MAX_ITEMS_PER_PAGE`：メニューの1ページあたりに表示するアイテムの最大数。デフォルトは10です。
- `MAX_COLUMNS_PER_PAGE`：メニューの1ページあたりに表示する列の最大数。デフォルトは2です。

### ユーザーとチャットのホワイトリスト

ボットと対話することが許可されているユーザーやチャットのホワイトリストを指定することができます。ホワイトリストは、`USER_WHITELIST` 変数に、ユーザーまたはチャットのIDのリストとして提供する必要があります。

### データベースの設定

ボットはMongoDBとJSONデータベースの両方をサポートしています。デフォルトでは、Mongoデータベースを使用します。JSONデータベースを使用するには、`WITHOUT_MONGODB`変数を`True`に設定します。

### ダイアログのタイムアウト

ボットには、一定期間活動がない場合に自動的に会話を終了するダイアログのタイムアウト機能があります。タイムアウトの期間は`DIALOG_TIMEOUT`変数を使用して設定できます。デフォルトのタイムアウトは7200秒（2時間）です。

### 画像の生成

ボットは、ユーザーの入力に基づいて画像を生成する機能をサポートしています。この機能を無効にするには、`FEATURE_IMAGE_GENERATION`変数を`False`に設定します。

生成する画像の数は、`OUTPUT_IMAGES`変数を使用して設定できます。デフォルトは4枚の画像です。

生成された画像は、一定期間経過するとボットのメモリから削除されます。有効期限は`GENERATED_IMAGE_EXPIRATION_MINUTES`変数を使用して設定できます。デフォルトの有効期限は5分です。

### URLの直接応答

デフォルトでは、ボットはURLを送信した後に応答します。この機能を無効にして、URLの処理後にユーザーの入力を待つには、`URL_DIRECT_RESPONSE`変数を`False`に設定します。

### ストリーミング応答

ボットはストリーミング応答で応答します。これにより、結果の連続的な出力が可能になります。この機能を無効にするには、`STREAM_ANSWERS`変数を`False`に設定します。

### 関数呼び出し

ボットは新しいOpenAI関数呼び出しをサポートしています。この機能を無効にするには、`FEATURE_FUNCTION_CALLS`変数を`False`に設定します。

### タイムアウトの質問

ボットには、継続するか新しい会話を開始するかを尋ねる機能があります。無効にすると、ボットは自動的にタイムアウトした会話を削除し、新しい会話を開始します。この機能を無効にするには、`TIMEOUT_ASK`変数を`False`に設定します。

### 音声の転写

ボットは音声ファイルの転写をサポートしています。この機能を無効にするには、`FEATURE_TRANSCRIPTION`変数を`False`に設定します。

### OCR（光学文字認識）

ボットは画像からテキストを読み取るためのOCRをサポートしています。この機能を無効にするには、`FEATURE_IMAGE_READ`変数を`False`に設定します。

### ドキュメントの読み取り

ボットはドキュメントの読み取りをサポートしています。この機能を無効にするには、`FEATURE_DOCUMENT_READ`変数を`False`に設定します。

### ウェブ検索

ボットはウェブ検索機能をサポートしています。この機能を無効にするには、`FEATURE_BROWSING`変数を`False`に設定します。

### URLの読み取り

ボットはURLの内容を読み取る機能をサポートしています。この機能を無効にするには、`FEATURE_URL_READ`変数を`False`に設定します。

### 音声とファイルのサイズ制限

ボットには、処理できる音声ファイルとドキュメントのサイズに制限があります。最大の音声ファイルサイズは`AUDIO_MAX_MB`変数を使用して設定できます（デフォルトは20MB）、最大のドキュメントファイルサイズは`DOC_MAX_MB`変数を使用して設定できます（デフォルトは10MB）... ex. AUDIO_MAX_MB=20

### URLのサイズ制限

ボットには、処理できるURLのサイズに制限があります。最大のURLサイズは`URL_MAX_MB`変数を使用して設定できます。デフォルトの制限は5MBです。

### リクエストのリトライとタイムアウト

ボットは、リクエストが失敗した場合にリトライをサポートしています。最大のリトライ回数は`REQUEST_MAX_RETRIES`変数を使用して設定できます。デフォルトは3回のリトライです。リクエストのタイムアウト期間は`REQUEST_TIMEOUT`変数を使用して設定できます。デフォルトのタイムアウトは10秒です。

### PDFページの制限

PDFドキュメントを読み取る際、ボットには処理できるページ数の制限があります。最大のページ制限は`PDF_PAGE_LIMIT`変数を使用して設定できます。デフォルトの制限は25ページです。

### 自動言語検出

ボットは、コンテキストとメニューの自動言語検出をサポートしています。ユーザーの言語がボットでサポートされていない場合のデフォルト言語は、`AUTO_LANG`変数を使用して設定できます。デフォルトの言語は英語（`en`）です。このデフォルトの言語は、ボットのエラーや一部のデバッグメッセージに使用されます。

### プロキシのサポート

ボットはAPIリクエストのみにプロキシを使用することができます。プロキシを使用するには、`API_TUNNEL`変数にプロキシのURLを指定します（例：`http://127.0.0.1:3128`）。プロキシが必要ない場合は、この変数を空のままにしてください。