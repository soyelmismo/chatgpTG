## 配置

### Telegram令牌

要使用Telegram机器人，您需要提供一个Telegram令牌。可以通过`https://t.me/botfather`创建一个机器人来获取此令牌。令牌需要存储在`TELEGRAM_TOKEN`变量中。

### 菜单配置

可以使用以下选项配置机器人的菜单：

- `MAX_ITEMS_PER_PAGE`：菜单中每页显示的最大项目数。默认为10。
- `MAX_COLUMNS_PER_PAGE`：菜单中每页显示的最大列数。默认为2。

### 用户和聊天白名单

您可以指定允许与机器人交互的用户和聊天的白名单。白名单应作为用户或聊天ID的列表提供，分别存储在`USER_WHITELIST`变量中。

### 数据库配置

机器人支持MongoDB和JSON数据库选项。默认情况下，它使用Mongo数据库。要使用JSON数据库，请将`WITHOUT_MONGODB`变量设置为`True`。

### 对话超时

机器人具有对话超时功能，如果一段时间内没有活动，会自动结束对话。可以使用`DIALOG_TIMEOUT`变量配置超时持续时间。默认超时时间为7200秒（2小时）。

### 图像生成

机器人支持根据用户输入生成图像。要禁用此功能，请将`FEATURE_IMAGE_GENERATION`变量设置为`False`。

可以使用`OUTPUT_IMAGES`变量配置要生成的图像数量。默认为4张图片。

生成的图像在一定时间后将从机器人的内存中删除。可以使用`GENERATED_IMAGE_EXPIRATION_MINUTES`变量配置过期时间。默认过期时间为5分钟。

### URL直接响应

默认情况下，机器人在发送URL以供阅读后立即回答。要禁用此功能，并在处理URL后等待用户输入，请将`URL_DIRECT_RESPONSE`变量设置为`False`。

### 流式回答

机器人使用流式响应进行回答，允许连续输出结果。要禁用此功能，请将`STREAM_ANSWERS`变量设置为`False`。

### 函数调用

机器人支持新的OpenAI函数调用。要禁用此功能，请将`FEATURE_FUNCTION_CALLS`变量设置为`False`。

### 超时询问

机器人具有询问是否继续或开始新对话的功能。如果禁用，机器人将自动删除超时对话并开始新对话。要禁用此功能，请将`TIMEOUT_ASK`变量设置为`False`。

### 转录

机器人支持音频文件的转录。要禁用此功能，请将`FEATURE_TRANSCRIPTION`变量设置为`False`。

### OCR（光学字符识别）

机器人支持从图像中读取文本的OCR功能。要禁用此功能，请将`FEATURE_IMAGE_READ`变量设置为`False`。

### 文档阅读

机器人支持阅读文档的功能。要禁用此功能，请将`FEATURE_DOCUMENT_READ`变量设置为`False`。

### 网络搜索

机器人支持网络搜索功能。要禁用此功能，请将`FEATURE_BROWSING`变量设置为`False`。

### URL阅读

机器人支持阅读URL的内容。要禁用此功能，请将`FEATURE_URL_READ`变量设置为`False`。

### 音频和文件大小限制

机器人对可以处理的音频文件和文档的大小有限制。可以使用`AUDIO_MAX_MB`变量配置最大音频文件大小（默认为20MB），可以使用`DOC_MAX_MB`变量配置最大文档文件大小（默认为10MB）... ex. AUDIO_MAX_MB=20

### URL大小限制

机器人对可以处理的URL的大小有限制。可以使用`URL_MAX_MB`变量配置最大URL大小。默认限制为5MB。

### 请求重试和超时

机器人在请求失败时支持请求重试。可以使用`REQUEST_MAX_RETRIES`变量配置最大重试次数。默认为3次重试。可以使用`REQUEST_TIMEOUT`变量配置请求超时持续时间。默认超时时间为10秒。

### PDF页数限制

在阅读PDF文档时，机器人对可以处理的页面数量有限制。可以使用`PDF_PAGE_LIMIT`变量配置最大页面限制。默认限制为25页。

### 自动语言检测

机器人支持上下文和菜单的自动语言检测。可以使用`AUTO_LANG`变量配置自动检测的默认语言（如果用户语言不受机器人支持）。默认语言为英语（`en`）。此默认语言用于机器人错误或某些调试消息。

### 代理支持

机器人仅支持对API请求使用代理。要使用代理，请在`API_TUNNEL`变量中提供代理URL（例如`http://127.0.0.1:3128`）。如果不需要代理，请将此变量留空。